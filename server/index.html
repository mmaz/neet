<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Mark Mazumder">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>NEET Spring 2019 Server - NEET Spring 2019</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "NEET Spring 2019 Server";
    var mkdocs_page_input_path = "server.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> NEET Spring 2019</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">MIT NEET Labs: Spring 2019</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../imitation_learning/">Imitation Learning Lab</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../neet_fall_2018/">MIT NEET Fall 2018</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../reinforcement_learning/">Reinforcement Learning Lab</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../resources/">Resources</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">NEET Spring 2019 Server</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#neet-spring-2019-server">NEET Spring 2019 Server</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#installing-dependencies">Installing Dependencies</a></li>
        
            <li><a class="toctree-l3" href="#connecting-to-the-server-over-ssh">Connecting to the server over SSH</a></li>
        
            <li><a class="toctree-l3" href="#opening-jupyter-notebooks-over-ssh">Opening Jupyter Notebooks over SSH</a></li>
        
            <li><a class="toctree-l3" href="#running-the-rl-simulation-environment">Running the RL Simulation Environment</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">NEET Spring 2019</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>NEET Spring 2019 Server</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="neet-spring-2019-server">NEET Spring 2019 Server</h1>
<div class="admonition danger">
<p class="admonition-title">Keep this in mind!</p>
<p>The NEET Server is a shared resource! Coordinate the times you are using the server with the other NEET teams so that you do not overlap. And <strong>remember to shut down your Jupyter Notebook or training script</strong> after you are done. Do not leave a training script running - it will reserve all available GPU memory, and prevent other teams from training.</p>
<p>If you and another team agree beforehand, you can limit the memory TensorFlow allocates while training, and both teams can train on the server simultaneously. Still, in this case, remember to shut down jupyter or your python training script when you are done.</p>
<p>Ask the instructors before running any commands with <code>sudo</code> rights.</p>
<p>Lastly, please do <strong>not</strong> reboot the server! Again, ask if you have questions.</p>
</div>
<h2 id="installing-dependencies">Installing Dependencies</h2>
<p>There's nothing to do! The dependencies you need for the <strong>Imitation learning lab</strong> and the <strong>Reinforcement learning lab</strong> are already installed in the <code>base</code> conda environment. This environment is automatically activated when you log in, so there are no extra steps necessary (i.e., you do not need to run <code>conda activate base</code>).</p>
<p>(<code>conda list</code> will show all dependencies installed in the environment if you are curious.)</p>
<h2 id="connecting-to-the-server-over-ssh">Connecting to the server over SSH</h2>
<p>At the terminal, the following command will SSH into the server, enable x-forwarding, and also forward a port for Jupyter Notebook access:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to replace <code>$USERNAME</code> and <code>$IP_ADDRESS</code> below with the appropriate values (ask the instructors in the Slack chatroom)</p>
</div>
<pre><code class="shell">ssh -L 8888:localhost:8888 -X  $USERNAME@$IP_ADDRESS
</code></pre>

<p>Once you are connected, run <code>ls</code> - you have an empty directory for your team already created in the home directory. (<code>mx0</code> is the "instructor" directory)</p>
<pre><code class="shell">$ ls
donkey_simulator mx0  mx1  mx2  mx3 
</code></pre>

<h3 id="adding-a-shortcut-for-easy-ssh-access">Adding a shortcut for easy SSH access:</h3>
<p><strong>This step is optional</strong></p>
<p>You can simplify the process of connecting to the NEET server further by adding the following information to your <strong>local</strong> SSH config file:</p>
<div class="admonition danger">
<p class="admonition-title">Warning</p>
<p>Make sure you are editing the config file <strong>on your personal laptop</strong> (not the server!) before proceeding:</p>
<p><code>$ vi ~/.ssh/config</code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to replace <code>$USERNAME</code> and <code>$IP_ADDRESS</code> below with the appropriate values (ask the instructors in the Slack chatroom)</p>
</div>
<pre><code>Host neet
    User $USERNAME
    HostName $IP_ADDRESS
    ForwardX11 yes
    IdentityFile ~/.ssh/id_rsa
    LocalForward 8888 127.0.0.1:8888
    ControlPath ~/.ssh/controlmasters/%r@%h:%p
    ControlMaster auto
</code></pre>

<p>This sets up port-forwarding (for Jupyter), <a href="https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing#Setting_Up_Multiplexing">SSH multiplexing</a>, and X-forwarding once and for all.</p>
<p>Afterwards you can SSH into the server just by typing:</p>
<pre><code class="shell">$ ssh neet
</code></pre>

<p>at your local command prompt.</p>
<h3 id="convenient-scp">Convenient SCP</h3>
<p>With the shortcut, you can also SCP directories and files to the server easily, e.g., to copy to your team's directory <code>mxN</code> (where <code>N</code> is 1,2, or 3):</p>
<pre><code class="shell">$ scp -r local_directory_w_training_images neet:~/mxN/
</code></pre>

<h3 id="no-password-logins">No-password logins</h3>
<p>If you would like to avoid being asked for a password each time, you can generate a local identity file:</p>
<p><a href="https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent</a></p>
<p>Then, use the following command to connect to the server.</p>
<pre><code class="shell"># only required once
$ ssh-copy-id neet
</code></pre>

<p>which will copy your public key to the server.</p>
<h2 id="opening-jupyter-notebooks-over-ssh">Opening Jupyter Notebooks over SSH</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have Jupyter Notebook running locally, shut it down first (or restart it and change the port to something besides the default port <code>8888</code>, so that the local port used by Jupyter does not conflict with the SSH-forwarded one)</p>
<p><strong>On your local computer:</strong></p>
<p><code>jupyter notebook --port 8889</code></p>
<p>for example.</p>
</div>
<p>Once you have SSHed into the computer, you can start jupyter in your team's folder (include <code>--no-browser</code> so that Firefox does not try to load over SSH - which will be annoyingly slow)</p>
<pre><code class="shell">$ cd mxN/
$ jupyter notebook --no-browser
</code></pre>

<p>Jupyter will provide a URL for you to use in your local computer's browser. Copy and paste it into your browser, e.g.,</p>
<pre><code>Or copy and paste one of these URLs:
   http://localhost:8888/?token=r4nd0mh3xstring
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is highly recommended to run a program like <code>tmux</code> or <code>screen</code> after first logging in, so that your work is not lost in case your SSH connection is interrupted. <code>tmux</code> is already installed on the server. </p>
<ul>
<li><a href="https://danielmiessler.com/study/tmux/">Here</a> is a simple guide that introduces <code>tmux</code>. </li>
<li>Also, <a href="https://gist.github.com/andreyvit/2921703">here</a> is a cheatsheet for quick reference.</li>
</ul>
</div>
<pre><code class="shell">$ cd mxN/
$ tmux
$ jupyter notebook --no-browser
</code></pre>

<h2 id="running-the-rl-simulation-environment">Running the RL Simulation Environment</h2>
<p>You can collect data and train a policy for the RL lab in person on the server (contact the instructors over Slack regarding server access).</p>
<p>There is a folder already created in the home directory called <code>~/donkey_simulator/</code> - you can start the simulator by double-clicking the executable <code>build_sdsandbox.x86_64</code> in the Ubuntu file explorer or by running it in a new terminal.</p>
<p>Once the simulator is running, you can train a policy in another terminal or over SSH.</p>
<div class="admonition danger">
<p class="admonition-title">Remember</p>
<p>Shut down the simulator and your training scripts when you are done!</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../resources/" class="btn btn-neutral" title="Resources"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Author: Mark Mazumder, 2019</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../resources/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
